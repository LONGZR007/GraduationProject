/****************************************************************************************************
 * 描述：SI2C 接口硬件驱动层声明
 *
 * 作者：龙泽润
 *
 * 版本：v1.0.0    日期：2018-05-02
 *                                                                              大连智海科技有限公司
****************************************************************************************************/

#include "stm32f10x.h"
#include "stm32f10x_gpio.h"

#ifndef STM32F10X_SI2C_H
#define STM32F10X_SI2C_H

#ifdef __cplusplus
 extern "C" {
#endif

	 
/* SI2C 管脚定义 */
	 
#define SI2C_SCL_GPIO_CLK 	    RCC_APB2Periph_GPIOB		/* GPIO端口时钟 */
#define SI2C_SDA_GPIO_CLK 	    RCC_APB2Periph_GPIOF		/* GPIO端口时钟 */
   
#define SI2C_SCL_PORT    GPIOB   
#define SI2C_SDA_PORT    GPIOF  
   
#define SI2C_SCL_PIN     GPIO_Pin_1    // SCL 使用 PB5 管脚
#define SI2C_SDA_PIN     GPIO_Pin_11    // SDA 使用 PB7 接口

/* SI2C 管脚操作宏定义 */

//#define SI2C_SCL_SET()    GPIO_OUT_SET(GPIOA, 5)    // SCL 输出置位
//#define SI2C_SCL_RST()    GPIO_OUT_RST(GPIOA, 5)    // SCL 输出复位
//#define SI2C_SDA_SET()    GPIO_OUT_SET(GPIOA, 7)    // SDA 输出置位
//#define SI2C_SDA_RST()    GPIO_OUT_RST(GPIOA, 7)    // SDA 输出复位
//#define SI2C_SDA_GET()    GPIO_IN_GET(GPIOA, 7)    // SDA 输入获取

/****************************************************************************************************
 * 描述：SI2C1 总线初始化
 *
 * 参数：无
 *
 * 返回：无
****************************************************************************************************/

void SI2C_Init(void);

/****************************************************************************************************
 * 描述：SI2C 产生起始信号
 *
 * 参数：无
 *
 * 返回：无
****************************************************************************************************/

void SI2C_Start(void);

/****************************************************************************************************
 * 描述：SI2C 产生停止信号
 *
 * 参数：无
 *
 * 返回：无
****************************************************************************************************/

void SI2C_Stop(void);

/****************************************************************************************************
 * 描述：等待应答信号
 *
 * 参数：无
 *
 * 返回：1：接收成功    0：接收失败
****************************************************************************************************/

u8 SI2C_Wait_ACK(void);

/****************************************************************************************************
 * 描述：产生应答信号
 *
 * 参数：无
 *
 * 返回：无
****************************************************************************************************/

void SI2C_ACK(void);

/****************************************************************************************************
 * 描述：不产生应答信号
 *
 * 参数：无
 *
 * 返回：无
****************************************************************************************************/

void SI2C_NACK(void);

/****************************************************************************************************
 * 描述：SI2C 发送一个字节
 *
 * 参数：txd：发送的数据
 *
 * 返回：无
****************************************************************************************************/

void SI2C_Send_Byte(u8 txd);

/****************************************************************************************************
 * 描述：SI2C 发送一个字节(反显)
 *
 * 参数：txd：发送的数据
 *
 * 返回：无
****************************************************************************************************/

void SI2C_Send_Against_Byte(u8 txd);

/****************************************************************************************************
 * 描述：SI2C 接收一个字节
 *
 * 参数：ack = 1，发送ACK
 * 参数：ack = 0，发送NACK 
 *
 * 返回：SI2C 接收到的数据
****************************************************************************************************/

u8 SI2C_Read_Byte(u8 ack);

/****************************************************************************************************
 * 描述：微秒延时函数
 *
 * 参数：time：时长
 *
 * 返回：无
****************************************************************************************************/

void Delay_us(u16 time);
	 
#ifdef __cplusplus
}
#endif

#endif /* STM32F10X_SI2C_H */

/* End Of File */
