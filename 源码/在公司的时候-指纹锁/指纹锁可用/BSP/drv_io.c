/****************************************************************************************************
 * 描述：板级初始化实现
 *
 * 作者：龙泽润
 *
 * 版本：v1.0.0    日期：2018-04-15
 *                                                                              大连智海科技有限公司
****************************************************************************************************/

#include "stm32f10x_rcc.h"
#include "drv_io.h"
#include "stm32f10x_gpio.h"

/****************************************************************************************************
 * 描述：IO 端口配置实现
 *
 * 参数：无
 *
 * 返回：无
****************************************************************************************************/
	 
void GPIO_Init(void)
{
	RCC_APB2_EN(RCC_APB2_IOPB | RCC_APB2_IOPA);    // 使能 GPIO A B 时钟
	
	GPIO_Config(GPIOB,            // 端口 B
	            GPIO_PIN_04 |     // 管脚 4 
	            GPIO_PIN_05 |     // 管脚 5
	            GPIO_PIN_06 |     // 管脚 6
	            GPIO_PIN_07,      // 管脚 7
	            GPIO_MODE_IPU,    // 上拉输入
	            0);               // 速度
	
	GPIO_Config(GPIOA,              // 端口 A
	            GPIO_PIN_04 |       // 管脚 4 
	            GPIO_PIN_05 |       // 管脚 5
	            GPIO_PIN_06 |       // 管脚 6
	            GPIO_PIN_07,        // 管脚 7
	            GPIO_MODE_GP_PP,    // 通用推挽输出
	            GPIO_SPEED_2M);     // 速度 2M
	
	GPIO_Config(GPIOB,              // 端口 B
				GPIO_PIN_00 |       // 管脚 0
	            GPIO_PIN_01,        // 管脚 1
	            GPIO_MODE_GP_PP,    // 通用推挽输出
	            GPIO_SPEED_2M);     // 速度 2M
}

/****************************************************************************************************
 * 描述：读取输入状态实现
 *
 * 参数：无
 *
 * 返回: 输入口的状态
****************************************************************************************************/

u8 IO_IN_Read(void)
{
	u8 IN = 0;    // 输入状态
	
	IN = GPIO_IDR_GET(GPIOB, 0xF0) >> 4;    // 读取输入状态
	
	return IN ^ 0x0F;    // 返回输入状态
}

/****************************************************************************************************
 * 描述：写输出状态实现
 *
 * 参数：OUT:输入口的状态
 *
 * 返回: 无
****************************************************************************************************/

void IO_OUT_Write(u8 OUT)
{
	OUT &= 0xF;                       // 清除无效数据
	
	GPIO_ODR_SET(GPIOA, OUT << 4);    // 写输出口状态
}

/****************************************************************************************************
 * 描述：设置出状态实现
 *
 * 参数：OUT:输入口的状态
 *
 * 返回: 无
****************************************************************************************************/

void IO_OUT_Set(u8 OUT)
{
	OUT &= 0xF;                       // 清除无效数据
	
	GPIO_BSR_SET(GPIOA, OUT << 4);    // 设置输出口状态
}

/****************************************************************************************************
 * 描述：复位输出状态实现
 *
 * 参数：OUT:输入口的状态
 *
 * 返回: 无
****************************************************************************************************/

void IO_OUT_Rst(u8 OUT)
{
	OUT &= 0xF;                       // 清除无效数据
	
	GPIO_BRR_SET(GPIOA, OUT << 4);    // 复位输出口状态
}

/****************************************************************************************************
 * 描述：反转输出状态实现
 *
 * 参数：OUT:输入口的状态
 *
 * 返回: 无
****************************************************************************************************/

void IO_OUT_Inv(u8 OUT)
{
	OUT &= 0xF;                       // 清除无效数据
	
	GPIO_ODR_INV(GPIOA, OUT << 4);    // 反转输出口状态
}

/* End Of File */
